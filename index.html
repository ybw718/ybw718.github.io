<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>空闲时间</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f0f7ff 0%, #e6f0ff 100%);
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #1a73e8 0%, #0d47a1 100%);
            color: white;
            padding: 1.5rem 0;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        header h1 {
            text-align: center;
            font-size: 2.2rem;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .auth-section, .main-section {
            background: white;
            padding: 2.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            margin-bottom: 2.5rem;
            border: 1px solid #e1e8ff;
        }

        .form-group {
            margin-bottom: 1.8rem;
        }

        label {
            display: block;
            margin-bottom: 0.7rem;
            font-weight: 600;
            color: #1a3a6d;
            font-size: 1.05rem;
        }

        input, select, textarea {
            width: 100%;
            padding: 0.9rem;
            border: 1px solid #d0d9f0;
            border-radius: 8px;
            font-size: 1.05rem;
            background: #f8fbff;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #1a73e8;
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.2);
        }

        button {
            background: linear-gradient(135deg, #1a73e8 0%, #0d47a1 100%);
            color: white;
            padding: 0.9rem 2.2rem;
            border: none;
            border-radius: 8px;
            font-size: 1.05rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(26, 115, 232, 0.25);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(26, 115, 232, 0.35);
        }

        .time-slot {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 12px;
            margin-top: 1.2rem;
        }

        .time-checkbox {
            display: flex;
            align-items: center;
            padding: 0.7rem;
            background: #f0f7ff;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #e1e8ff;
        }

        .time-checkbox:hover {
            background: #e6f0ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        }

        .time-checkbox input {
            margin-right: 0.7rem;
            width: auto;
        }

        .user-list {
            display: grid;
            gap: 1.2rem;
            margin-top: 1.2rem;
        }

        .user-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border: 1px solid #e1e8ff;
            transition: all 0.3s ease;
        }

        .user-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.08);
        }

        .user-name {
            font-weight: 700;
            color: #1a3a6d;
            margin-bottom: 0.7rem;
            font-size: 1.2rem;
        }

        .available-times {
            display: flex;
            flex-wrap: wrap;
            gap: 0.7rem;
            margin-top: 0.7rem;
        }

        .time-tag {
            background: linear-gradient(135deg, #1a73e8 0%, #0d47a1 100%);
            color: white;
            padding: 0.4rem 0.9rem;
            border-radius: 20px;
            font-size: 0.95rem;
            font-weight: 500;
            box-shadow: 0 2px 6px rgba(26, 115, 232, 0.2);
        }

        .hidden {
            display: none;
        }

        .section-title {
            font-size: 1.6rem;
            margin-bottom: 1.7rem;
            color: #1a3a6d;
            font-weight: 700;
            position: relative;
            padding-bottom: 0.7rem;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: linear-gradient(135deg, #1a73e8 0%, #0d47a1 100%);
            border-radius: 2px;
        }

        .logout-btn {
            background: linear-gradient(135deg, #e53935 0%, #b71c1c 100%);
            float: right;
            box-shadow: 0 4px 12px rgba(229, 57, 53, 0.25);
        }

        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(229, 57, 53, 0.35);
        }

        .day-selector {
            margin-bottom: 1.7rem;
        }

        .day-tabs {
            display: flex;
            gap: 0.7rem;
            margin-bottom: 1.2rem;
            flex-wrap: wrap;
        }

        .day-tab {
            padding: 0.7rem 1.5rem;
            background: #f0f7ff;
            border: 1px solid #d0d9f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .day-tab.active {
            background: linear-gradient(135deg, #1a73e8 0%, #0d47a1 100%);
            color: white;
            border-color: #0d47a1;
            box-shadow: 0 4px 8px rgba(26, 115, 232, 0.2);
        }

        .day-tab:hover:not(.active) {
            background: #e6f0ff;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .auth-section, .main-section {
                padding: 1.8rem;
            }
            
            .time-slot {
                grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
            }
            
            .day-tabs {
                gap: 0.5rem;
            }
            
            .day-tab {
                padding: 0.6rem 1.2rem;
                font-size: 0.95rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>空闲时间共享平台</h1>
        </div>
    </header>

    <div class="container">
        <!-- 登录/注册区域 -->
        <div id="authSection" class="auth-section">
            <h2 class="section-title">用户登录</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginUsername">用户名</label>
                    <input type="text" id="loginUsername" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">密码</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit">登录</button>
                <p style="margin-top: 1rem;">
                    还没有账号？<a href="#" onclick="showRegister()">立即注册</a>
                </p>
            </form>

            <form id="registerForm" class="hidden">
                <h2 class="section-title">用户注册</h2>
                <div class="form-group">
                    <label for="registerUsername">用户名</label>
                    <input type="text" id="registerUsername" required>
                </div>
                <div class="form-group">
                    <label for="registerRealName">真实姓名</label>
                    <input type="text" id="registerRealName" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">密码</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label for="registerPhone">手机号</label>
                    <input type="tel" id="registerPhone" required>
                </div>
                <button type="submit">注册</button>
                <p style="margin-top: 1rem;">
                    已有账号？<a href="#" onclick="showLogin()">立即登录</a>
                </p>
            </form>
        </div>

        <!-- 主功能区域 -->
        <div id="mainSection" class="main-section hidden">
            <button class="logout-btn" onclick="logout()">退出登录</button>
            <h2 class="section-title">填写您的空闲时间</h2>
            
            <div class="day-selector">
                <div class="day-tabs">
                    <div class="day-tab active" onclick="selectDay('monday')">周一</div>
                    <div class="day-tab" onclick="selectDay('tuesday')">周二</div>
                    <div class="day-tab" onclick="selectDay('wednesday')">周三</div>
                    <div class="day-tab" onclick="selectDay('thursday')">周四</div>
                    <div class="day-tab" onclick="selectDay('friday')">周五</div>
                    <div class="day-tab" onclick="selectDay('saturday')">周六</div>
                    <div class="day-tab" onclick="selectDay('sunday')">周日</div>
                </div>
            </div>

            <form id="timeForm">
                <div class="form-group">
                    <label>选择您的空闲时间段（可多选）</label>
                    <div class="time-slot" id="timeSlots"></div>
                </div>
                <button type="submit">保存空闲时间</button>
            </form>

            <h2 class="section-title" style="margin-top: 2rem;">其他用户的空闲时间</h2>
            <div id="userList" class="user-list"></div>
        </div>
    </div>

    <script>
        // 时间段数据
        const timeSlots = [
            '08:00-09:00', '09:00-10:00', '10:00-11:00', '11:00-12:00',
            '12:00-13:00', '13:00-14:00', '14:00-15:00', '15:00-16:00',
            '16:00-17:00', '17:00-18:00', '18:00-19:00', '19:00-20:00',
            '20:00-21:00', '21:00-22:00'
        ];

        // 星期数据
        const days = {
            'monday': '周一',
            'tuesday': '周二',
            'wednesday': '周三',
            'thursday': '周四',
            'friday': '周五',
            'saturday': '周六',
            'sunday': '周日'
        };

        let currentUser = null;
        let currentDay = 'monday';

        // 模拟数据库存储
        let users = JSON.parse(localStorage.getItem('users')) || {};
        let schedules = JSON.parse(localStorage.getItem('schedules')) || {};

        // 显示登录表单
        function showLogin() {
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('registerForm').classList.add('hidden');
        }

        // 显示注册表单
        function showRegister() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
        }

        // 登录表单提交
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;

            if (users[username] && users[username].password === password) {
                currentUser = username;
                document.getElementById('authSection').classList.add('hidden');
                document.getElementById('mainSection').classList.remove('hidden');
                loadTimeSlots();
                loadUserList();
            } else {
                alert('用户名或密码错误！');
            }
        });

        // 注册表单提交
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('registerUsername').value;
            const realName = document.getElementById('registerRealName').value;
            const password = document.getElementById('registerPassword').value;
            const phone = document.getElementById('registerPhone').value;

            if (users[username]) {
                alert('用户名已存在！');
                return;
            }

            users[username] = {
                realName: realName,
                password: password,
                phone: phone
            };

            localStorage.setItem('users', JSON.stringify(users));
            alert('注册成功！请登录。');
            showLogin();
        });

        // 退出登录
        function logout() {
            currentUser = null;
            document.getElementById('authSection').classList.remove('hidden');
            document.getElementById('mainSection').classList.add('hidden');
            document.getElementById('loginForm').reset();
        }

        // 选择星期
        function selectDay(day) {
            currentDay = day;
            document.querySelectorAll('.day-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            loadTimeSlots();
        }

        // 加载时间段选择器
        function loadTimeSlots() {
            const container = document.getElementById('timeSlots');
            container.innerHTML = '';

            timeSlots.forEach(slot => {
                const label = document.createElement('label');
                label.className = 'time-checkbox';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.value = slot;
                
                // 检查是否已经选择了该时间段
                if (schedules[currentUser] && 
                    schedules[currentUser][currentDay] && 
                    schedules[currentUser][currentDay].includes(slot)) {
                    checkbox.checked = true;
                }

                label.appendChild(checkbox);
                label.appendChild(document.createTextNode(slot));
                container.appendChild(label);
            });
        }

        // 保存空闲时间
        document.getElementById('timeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!schedules[currentUser]) {
                schedules[currentUser] = {};
            }
            
            const selectedTimes = [];
            document.querySelectorAll('#timeSlots input[type="checkbox"]:checked').forEach(cb => {
                selectedTimes.push(cb.value);
            });

            schedules[currentUser][currentDay] = selectedTimes;
            localStorage.setItem('schedules', JSON.stringify(schedules));
            
            alert('空闲时间保存成功！');
            loadUserList();
        });

        // 加载用户列表
        function loadUserList() {
            const container = document.getElementById('userList');
            container.innerHTML = '';

            Object.keys(schedules).forEach(username => {
                if (username === currentUser) return; // 不显示自己

                const userCard = document.createElement('div');
                userCard.className = 'user-card';

                const userName = document.createElement('div');
                userName.className = 'user-name';
                userName.textContent = users[username].realName;

                const availableTimes = document.createElement('div');
                availableTimes.className = 'available-times';

                Object.keys(schedules[username]).forEach(day => {
                    if (schedules[username][day].length > 0) {
                        const dayTitle = document.createElement('div');
                        dayTitle.style.width = '100%';
                        dayTitle.style.marginTop = '0.5rem';
                        dayTitle.style.fontWeight = 'bold';
                        dayTitle.textContent = days[day] + ':';
                        availableTimes.appendChild(dayTitle);

                        schedules[username][day].forEach(time => {
                            const timeTag = document.createElement('span');
                            timeTag.className = 'time-tag';
                            timeTag.textContent = time;
                            availableTimes.appendChild(timeTag);
                        });
                    }
                });

                if (availableTimes.children.length === 0) {
                    availableTimes.textContent = '暂无空闲时间信息';
                    availableTimes.style.color = '#999';
                }

                userCard.appendChild(userName);
                userCard.appendChild(availableTimes);
                container.appendChild(userCard);
            });
        }
    </script>
</body>
</html>